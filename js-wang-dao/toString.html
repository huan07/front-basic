<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>2</title>
  </head>
  <body>
    <script>
      var str = 'str';
      var num = 1;
      var bool = true;

      var arr = [1, 2, 3];
      var obj = {};
      var foo = function () {};

      //
      // Object.prototype.toString(), 返回一个对象的字符串形式，默认情况下返回 类型字符串 // !!
      //
      // 字符串、
      // 数组(返回数组的字符串形式)、 // !!
      // 函数、
      // Date 对象、
      // Number对象、
      // 等 都分别部署了自定义的toString方法，覆盖了Object.prototype.toString方法，不会返回"[object Object]"
      console.log('obj.toString() default =>', obj.toString());

      // example
      console.log('调用的是自定义toString() 方法 =>');
      console.log(str.toString());
      console.error(arr.toString(), Object.prototype.toString.call(arr)); // !
      console.log(foo.toString());
      console.log(new Date().toString());
      console.log(num.toString());

      //
      // 主要用途：
      // 1.数据类型自动转换会默认调用
      // 2.判断数据类型

      var reg = /\[object (.*?)\]/;
      var type = function (value) {
        var s = Object.prototype.toString.call(value);

        var matched = s.match(reg);
        console.log('value => => => =>', value, matched);

        return s;
      };
      console.log(type(num), type(str), type(bool), type(arr), type(obj), type(foo));
      console.log(type(null), type(undefined));

      //
      var myTypeBetter = function (value) {
        return Object.prototype.toString.call(value).slice(8, -1);
      };

      console.warn('\n\r');
      console.log(
        myTypeBetter(num),
        myTypeBetter(str),
        myTypeBetter(bool),
        myTypeBetter(arr),
        myTypeBetter(obj),
        myTypeBetter(foo)
      );
      console.log(myTypeBetter(null), myTypeBetter(undefined));
    </script>
  </body>
</html>
